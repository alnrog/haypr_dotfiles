# =========================================================
# Window rules
# =========================================================

# Ignore maximize requests from apps
windowrule = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrule = nofocus, class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# =========================================================
# Workspace Rules
# =========================================================

# Browser to workspace 2
windowrule = workspace 2, class:^(firefox)$
windowrule = workspace 2, class:^(chromium)$
windowrule = workspace 2, class:^(Google-chrome)$

# Communication apps to workspace 3
windowrule = workspace 3, class:^(discord)$
windowrule = workspace 3, class:^(telegram-desktop)$
windowrule = workspace 3, class:^(Slack)$

# Music/Media to workspace 4
windowrule = workspace 4, class:^(Spotify)$
windowrule = workspace 4, class:^(vlc)$

# =========================================================
# File Dialogs (Float + Center)
# =========================================================

# Generic file dialogs
windowrulev2 = float, title:^(Open File|Save File|Save As|Preferences|File Upload|Choose Files).*
windowrulev2 = center, title:^(Open File|Save File|Save As|Preferences|File Upload|Choose Files).*
windowrulev2 = size 800 600, title:^(Open File|Save File|Save As).*

# KDE dialogs
windowrulev2 = float, class:^(org\.kde\.kdialog|kdialog)$
windowrulev2 = center, class:^(org\.kde\.kdialog|kdialog)$

# GTK file chooser
windowrulev2 = float, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = center, class:^(xdg-desktop-portal-gtk)$

# XDG portals
windowrulev2 = float, class:^(xdg-desktop-portal-kde)$
windowrulev2 = center, class:^(xdg-desktop-portal-kde)$

# =========================================================
# Specific Applications
# =========================================================

# Pavucontrol (Volume Control)
windowrulev2 = float, class:^(org\.pulseaudio\.pavucontrol)$
windowrulev2 = size 500 400, class:^(org\.pulseaudio\.pavucontrol)$
windowrulev2 = center, class:^(org\.pulseaudio\.pavucontrol)$
windowrulev2 = pin, class:^(org\.pulseaudio\.pavucontrol)$

# Blueman (Bluetooth Manager)
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = size 700 500, class:^(blueman-manager)$
windowrulev2 = center, class:^(blueman-manager)$

# nm-connection-editor (Network Manager)
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = size 700 500, class:^(nm-connection-editor)$
windowrulev2 = center, class:^(nm-connection-editor)$

# Calculator
windowrulev2 = float, class:^(org.gnome.Calculator|gnome-calculator|qalculate-gtk)$
windowrulev2 = size 400 500, class:^(org.gnome.Calculator|gnome-calculator|qalculate-gtk)$
windowrulev2 = center, class:^(org.gnome.Calculator|gnome-calculator|qalculate-gtk)$

# Image viewers
windowrulev2 = float, class:^(imv|feh|sxiv)$
windowrulev2 = center, class:^(imv|feh|sxiv)$

# =========================================================
# Picture-in-Picture
# =========================================================

# Firefox PiP
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = pin, title:^(Picture-in-Picture)$
windowrulev2 = size 640 360, title:^(Picture-in-Picture)$
windowrulev2 = move 100%-w-20 100%-w-20, title:^(Picture-in-Picture)$

# Chrome PiP
windowrulev2 = float, title:^(.*is sharing (your screen|a window)\.)$
windowrulev2 = move 100%-w-20 100%-w-20, title:^(.*is sharing (your screen|a window)\.)$

# =========================================================
# Steam
# =========================================================

# Steam main window - tile normally
windowrulev2 = tile, class:^(steam)$, title:^(Steam)$

# Steam popups - float
windowrulev2 = float, class:^(steam)$, title:^(Friends List|Screenshot Uploader|Steam - News).*
windowrulev2 = center, class:^(steam)$, title:^(Friends List|Screenshot Uploader).*

# Steam games - fullscreen workspace 5
windowrulev2 = workspace 5, class:^(steam_app_.*)$
windowrulev2 = fullscreen, class:^(steam_app_.*)$

# =========================================================
# Development Tools
# =========================================================

# VS Code
windowrulev2 = workspace 1, class:^(code-oss|Code|code)$

# JetBrains IDEs
windowrulev2 = workspace 1, class:^(jetbrains-.*)$

# Android Studio
windowrulev2 = workspace 1, class:^(jetbrains-studio)$

# Terminal (if you want it floating)
# windowrulev2 = float, class:^(kitty)$, title:^(floating-term)$
# windowrulev2 = size 800 600, class:^(kitty)$, title:^(floating-term)$
# windowrulev2 = center, class:^(kitty)$, title:^(floating-term)$

# =========================================================
# Opacity Rules (for specific apps)
# =========================================================

# Transparent terminal (опционально)
# windowrulev2 = opacity 0.9 0.8, class:^(kitty)$

# Transparent file manager (опционально)
# windowrulev2 = opacity 0.95 0.9, class:^(dolphin|thunar|nautilus)$

# =========================================================
# Idle Inhibit (prevent screen timeout)
# =========================================================

# Prevent sleep during video playback
windowrulev2 = idleinhibit focus, class:^(mpv|vlc|firefox)$, title:^(.*(YouTube|Twitch|Netflix).*)$

# Prevent sleep during games
windowrulev2 = idleinhibit fullscreen, class:^(steam_app_.*)$

# =========================================================
# Size/Position Rules
# =========================================================

# Center new floating windows by default
# (уже есть в коде выше для конкретных приложений)

# Maximum size for floating windows
windowrulev2 = maxsize 1600 900, floating:1

# =========================================================
# Special Rules
# =========================================================

# Telegram media viewer
windowrulev2 = float, class:^(org.telegram.desktop)$, title:^(Media viewer)$
windowrulev2 = center, class:^(org.telegram.desktop)$, title:^(Media viewer)$

# GIMP - float all dialogs
windowrulev2 = float, class:^(gimp)$, title:^((?!GNU Image Manipulation Program).*)$

# Discord - pop-out windows
windowrulev2 = float, class:^(discord)$, title:^(Discord Updater)$

# =========================================================
# NOTES
# =========================================================

# Найти class и title окна:
# 1. Открой приложение
# 2. Выполни: hyprctl clients | grep -A 10 "название"
# 3. Или наведи мышь и нажми: SUPER+F1 (если настроен биндинг)

# Форматы правил:
# windowrule = RULE, WINDOW
# windowrulev2 = RULE, CRITERIA

# Полезные правила:
# float - плавающее окно
# tile - тайловое окно
# center - центрировать
# size W H - размер
# move X Y - позиция
# workspace N - воркспейс
# opacity VALUE - прозрачность
# fullscreen - полноэкранный режим
# pin - прикрепить поверх всех окон

# =========================================================
